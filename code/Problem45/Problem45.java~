/*
Problem:

Triangle, pentagonal, and hexagonal numbers are generated by the following formulae:

Triangle	 	Tn=n(n+1)/2	 	1, 3, 6, 10, 15, ...
Pentagonal	 	Pn=n(3n−1)/2	 	1, 5, 12, 22, 35, ...
Hexagonal	 	Hn=n(2n−1)	 	1, 6, 15, 28, 45, ...
It can be verified that T285 = P165 = H143 = 40755.

Find the next triangle number that is also pentagonal and hexagonal.
*/

/*
Solution:

Use a sieve method
*/ 

public class Problem45 {
    public static void main(String[] args) {
	/* create a sieve */
	int sieveSize = 1000000;
	int[] sieve = new int[sieveSize];

	/* generate the triangle numbers, incrementing the corresponding sieve elements */
	int n = 1;
	int triangleNumber;
	while((triangleNumber = n*(n+1)/2) < sieve.length) {
	    sieve[triangleNumber]++;
	    n++;
	}

	/* generate the pentagonal numbers, incrementing the corresponding sieve elements */
	int n = 1;
	int pentagonalNumber;
	while((pentagonalNumber = n*(3n-1)/2) < sieve.length) {
	    sieve[pentagonalNumber]++;
	    n++;
	}

	/* generate the hexagonal numbers, and report those that are also triangle and pentagonal */
	int n = 1;
	int hexagonalNumber;
	while((hexagonalNumber = n*(2*n-1)) < sieve.length) {
	    if(sieve[hexagonalNumber] == 2) {
		System.out.println(hexagonalNumber + " is a winner");
	    }
	    n++;
	}

    }
}
